# Copyright (c) 2025 Microchip Technology Inc.
# SPDX-License-Identifier: Apache-2.0

description: Microchip DAC controller

compatible: "microchip,dac-u2502"

include:
  - name: dac-controller.yaml
  - name: pinctrl-device.yaml

properties:
  reg:
    required: true

  clocks:
    required: true

  clock-names:
    required: true

  "#io-channel-cells":
    type: int
    required: true
    const: 1
    description: Number of cells needed to represent a channel.

  refsel:
    type: string
    required: true
    description: |
      Reference Voltage selection. Must be one of:
      - "vrefau" (0x0) - Unbuffered External Voltage Reference
      - "vddana" (0x1) - Voltage Supply
      - "vrefab" (0x2) - Buffered External Voltage Reference
      - "intref" (0x3) - Internal Bandgap Reference
    enum:
      - "vrefau"
      - "vddana"
      - "vrefab"
      - "intref"

  max_channels:
    type: int
    default: 2
    description: |
      Maximum number of channels

child-binding:
  description: |
    Channel configuration.
    All nodes using this binding must be named "channel".

  properties:
    channel:
      type: int
      required: true
      description: Channel identifier.

    rate:
      type: int
      required: true
      description: |
        Conversion Speed in kSPS(Kilo Samples per second)
      enum:
        - 100
        - 500
        - 1000

    ext_filter:
      type: boolean
      description: |
        Enable External Filter

    data_adj:
      type: string
      default: right
      description: |
        Adjust Data in Data Register
      enum:
        - right
        - left

    dither:
      type: boolean
      description: |
        Enable the Dithering Mode

    sampling_ratio:
      type: int
      default: 1
      description: |
        Set the Oversampling Ratio
        Setting the Oversampling Ratio will Disable the refresh rate.
      enum:
        - 1
        - 2
        - 4
        - 8
        - 16
        - 32

    refresh:
      type: int
      default: 0
      description: |
        Refresh Period in us ( 0 - Disabled )
      enum:
        - 0
        - 30
        - 60
        - 90
        - 120
        - 150
        - 180
        - 210
        - 240
        - 270
        - 300
        - 330
        - 360
        - 390
        - 420
        - 450
