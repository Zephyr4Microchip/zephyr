# Copyright (c) 2025 Microchip Technology Inc.
# SPDX-License-Identifier: Apache-2.0

include: [base.yaml]

description: gclk generator configuration.
compatible: "microchip,sam-d5x-e5x-gclkgen"

child-binding:
  properties:
    subsystem:
      type: int
      required: true
      description: Clock subsystem

    gclkgen_div_factor:
      type: int
      default: 0
      description: |
        Represent a division value for the corresponding Generator. The actual division factor is
        dependent on the state of div_select (gclk1 0 - 65535, others 0 - 255)

    gclkgen_run_in_standby_en:
      type: int
      enum:
        - 0
        - 1
      default: 0
      description: |
        Keep the Generator running in Standby as long as it is configured to output to a dedicated
        GCLK_IOn pin. If output is not configured to a pin, this field has no effect and the
        generator will only be running if a peripheral requires the clock.

    gclkgen_div_select:
      type: string
      enum:
        - "div-factor"
        - "div-factor-power"
      default: "div-factor"
      description: |
        The Generator clock frequency equals the clock source frequency divided by div_factor
        DIV_FACTOR_POWER: The Generator clock frequency equals the clock source frequency divided
        by 2^(N+1), where N is the div_factor

    gclkgen_pin_output_en:
      type: int
      enum:
        - 0
        - 1
      default: 0
      description: |
        Generator clock output to the corresponding pin, if that pin is not configured as input
        source.

    gclkgen_pin_output_off_val:
      type: string
      enum:
        - "low"
        - "high"
      default: "low"
      description: |
        Output value of the corresponding pin, when the Generator is turned off or the output_en is
        false, as long as the pin is not source.

    gclkgen_duty_50_50_en:
      type: int
      enum:
        - 0
        - 1
      default: 0
      description: Improve the duty cycle of the Generator output to 50/50 for odd division factors

    gclkgen_en:
      type: int
      enum:
        - 0
        - 1
      default: 0
      description: Enable gclk generator

    gclkgen_src:
      type: string
      enum:
        - "xosc0"
        - "xosc1"
        - "gclk-pin"
        - "gclk1"
        - "osculp32k"
        - "osc32k"
        - "dfll"
        - "fdpll0"
        - "fdpll1"
      default: "xosc0"
      description: Generator source clock selection

    gclkgen_pin_src_freq:
      type: int
      default: 0
      description: External input clock frequency of the pin, when used as source. (0 - 200000000)
